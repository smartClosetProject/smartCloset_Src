<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.admin.prdetail.dao.PrDetailDAO">

		<sql id="prDetailSearch">
		
		</sql>
	<!-- 상품 리스트 기본 조회 -->
		<select id="prDetailList" parameterType="prDetail" resultType="prDetail">
			<![CDATA[select upper(pr_num) as pr_num, pr_name, (pr_categoryl||' > '||pr_categorys) as category, 
			pr_issale, pr_price
			from(
				select/*+index_desc(pr_detail PR_DETAIL_PR_NUM_PK) */
				rownum as rnum, pr_num, pr_name, pr_categoryl,pr_categorys, pr_issale, pr_price, pr_regdate 
			from pr_detail
			where]]> 
			<trim prefix="(" suffix=") AND" prefixOverrides="AND">
				<include refid="prDetailSearch"></include>
			</trim>
			<![CDATA[ rownum <=#{pageNum}*#{amount}
			)prDetailList
			where rnum >(#{pageNum} -1)*#{amount}
			]]>
		</select>
		<insert id="prDetailInsert" parameterType="prDetail">
			insert into pr_detail (pr_num, pr_name, pr_price, pr_issale, pr_mainimg, 
			pr_contentimg, pr_thumb,pr_categoryl, pr_categorys, pr_season) values 
			(#{pr_num},#{pr_name},#{pr_price},#{pr_issale},#{pr_mainimg},#{pr_contentimg},#{pr_thumb},#{pr_categoryl},
			#{pr_categorys},#{pr_season})
		</insert>
		
		<select id="productDetail" parameterType="product" resultType="product">
			select pro_num, pro_colorImg, pro_color, pro_size, pro_stock, pro_sales
			from product where pr_num=#{pr_num}
		</select>

</mapper>