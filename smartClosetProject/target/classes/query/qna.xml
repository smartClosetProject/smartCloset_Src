<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.qna.dao.QnaDao">
 <select id="qnaList" parameterType="qna" resultType="qna">
	<![CDATA[
			SELECT
			q_num, m_num, q_title, to_char(b_date,'YYYY-MM-DD') as q_regdate, q_file
			FROM (
				 SELECT /*+ INDEX_DESC(qna qna_pk) */
				 rownum as rnum, q_num, m_num, q_title, q_regdate, q_file
				 FROM qna
				 WHERE]]>
				 <trim prefix="(" suffix=") AND " prefixOverrides="AND">
				 	<include refid="qnaSearch"></include>
				 </trim>
	<![CDATA[  rownum <= #{pageNum} * #{amount}
				 ) qnalist
				 WHERE rnum > (#{pageNum}-1) * #{amount}
				]]>
	</select>
	<!--  qna게시물  등록 -->
<!--  <insert id ="qnaInsert" parameterType="qna">
		/*Qna - qnaInsert*/
		<selectKey keyProperty="q_num" resultType="int" order="BEFORE">
		select spring_qna_seq.nextval from dual	
		</selectKey>
		insert into qna(q_num, m_num, q_title, q_content, q_passwd, q_file, ad_num)
		values(#{q_num}, #{m_num}, #{q_title}, #{q_content}, #{q_passwd}, #{q_file}, #{ad_num})
	</insert> -->	


</mapper>